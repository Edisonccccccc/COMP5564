## 🕒 数据时间范围说明

- **分析时间段**：2015-01-01 至 2021-01-08
  - ✅ 2015-01-01：保留特朗普当选前一年的历史言论数据
  - ✅ 2016-11-08：特朗普当选总统
  - ✅ 2017-01-20：特朗普正式就任总统
  - ✅ 2021-01-08：特朗普被永久封禁 Twitter，数据集终止
  - ✅ 2024-11-05：特朗普赢得大选（先搁置）

## 📁 数据文件说明（data/）

| 文件名                      | 描述                                                         | 时间范围                 |
|---------------------------|--------------------------------------------------------------|--------------------------|
| `realdonaldtrump.csv`     | Trump 官方账号推文原始数据（含文本、日期、转发、点赞等字段）       | 2009-05-04 ~ 2020-06-17 |
| `trumptweets.csv`         | 补充 Trump 推文数据，结构与上者相同，用于数据合并提升覆盖度         | 2009-05-04 ~ 2020-01-20 |
| `trump_sentiment_daily.csv` | 从上述推文中提取的每日平均情绪得分（VADER 分析）                     | 2009-05-04 ~ 2020-06-17 |
| `stock_closes.csv`        | MAGN7 及指数（AAPL, MSFT, NVDA 等）的每日收盘价（用于 LSTM 等模型）     | 2015-01-02 ~ 2021-01-07 |
| `stock_returns.csv`       | MAGN7 股票每日收益率（基于收盘价 pct_change 后计算）                | 2015-01-05 ~ 2021-01-07 |
| `us_treasury_yields_daily.csv` | 美国国债（10Y 等）收益率原始数据（日频，来源于外部 CSV）              | 1962-01-02 ~ 2024-06-21 |
| `sentiment_classified_tweets_2017_2021_batch.csv` | 经人工标注的 Trump 推文情绪分类数据（pos/neg/neu 三类）         | 2017-01-20 ~ 2021-01-08 |
| `trump_sentiment_labeled_no_classification.csv`   | Trump 推文每日情绪得分（未分类标签，可能用于回归）             | 2017-01-20 ~ 2021-01-08 |

## 项目进展总结

### ✅ 已完成
1. **数据准备**
   - 获取 MAGN7（AAPL, MSFT, NVDA 等）股票日收益率（使用 yfinance，时间范围为 2015-01-01 至 2021-01-08）
   - 导入美国国债收益率 CSV 文件
   - 构造 Trump 情绪因子：
     - 前期使用模拟情绪（范围 [-1, 1]，3日滚动平均）
     - 当前已替换为基于真实推文文本的每日情绪得分（使用 VADER）
     - 输出 Trump 推文情绪得分的日期对照表 CSV（`output/trump_sentiment_daily.csv`）

2. **建模分析**
   - 单因子回归：股票收益率 ~ 国债收益率变动率（基线模型）
   - 单因子回归：股票收益率 ~ 模拟 Trump 情绪（原型测试）

---

### ❗待完成
1. 多因子建模：股票收益率 ~ 国债 + Trump 情绪
2. 考察情绪滞后效应（.shift(n)）
3. 增加显著性检验与模型稳健性分析
4. 输出最终图表与可视化报告

## 📦 各代码模块结构说明

### 1. `trump_tweet.py`
- **输入**：
  - MAGN7 股票历史收盘价（通过 yfinance 获取）
  - 模拟或真实的 Trump 推文每日情绪得分
- **处理**：
  - 对每支股票进行 OLS 回归：收益率 ~ 情绪得分
  - 标准化情绪得分，输出回归系数、p 值、R²
- **输出**：
  - 分析结果表格
  - 股票收益率与情绪得分双轴图
  - 相关性热图

### 2. `us_treasury_yields_daily.py`
- **输入**：
  - MAGN7 股票历史收益率（yfinance）
  - 国债收益率 CSV（多个期限，日频）
- **处理**：
  - 计算美债收益率的每日变动率
  - 对每支股票进行 OLS 回归：收益率 ~ 国债变动率
- **输出**：
  - 回归结果表格（系数、p 值、R²）
  - 股票收益率 vs 国债变动图
  - 国债与股票的相关性热图

### 3. `train_LSTM.py`
- **输入**：
  - 某只股票的历史收盘价、成交量、10Y 国债收益率
- **处理**：
  - 构建 `[Close, Volume, US10Y]` 特征序列，标准化
  - 使用 LSTM 进行滑窗预测（如60日窗口）
- **输出**：
  - 模型在训练/测试集的预测 vs 实际图
  - MSE、R² 等回归评估指标

### 4. `analyze_trump_sentiment.py`
- **输入**：
  - `data/realdonaldtrump.csv`：Trump 推文文本（含字段 content, date 等）
  - `data/trumptweets.csv`：另一份 Trump 推文数据（相同结构）
- **处理**：
  - 合并两份数据，保留日期和内容
  - 使用 VADER 工具对每条 tweet 文本打情绪分（compound，范围 -1 ~ 1）
  - 将所有推文按日期聚合为平均情绪得分
- **输出**：
  - `output/trump_sentiment_daily.csv`：包含字段 [date, sentiment_score] 的 CSV 文件，用于情绪建模
